<div class="row">
  <div class="col-sm-12">
    <app-card [title]="'Coupon Management'" [classHeader]="true">
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">Search</label>
        <div class="col-sm-6">
          <input type="text" class="form-control" (ngModelChange)="onSearchInputChange($event)" placeholder="Enter Coupon Code"
            [(ngModel)]="search_input">
        </div>
        <div class="col-sm-4">
            <button class="btn btn-primary btn-round" (click) = "openFormModal()"><i class="fa fa-plus"></i>Create</button>
          </div>
      </div>
      <ngx-datatable #mydatatable class="material data-table" [headerHeight]="50" [limit]="10" [columnMode]="'force'"
        [footerHeight]="50" [rowHeight]="'auto'" [rows]="rows">
        <ngx-datatable-column name="Name">
          <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
            <span title="Double click to edit" (dblclick)="editing[rowIndex + '-name'] = true" *ngIf="!editing[rowIndex + '-name']">
              {{value}}
            </span>
            <input autofocus (blur)="updateValue($event, 'name', rowIndex)" *ngIf="editing[rowIndex+ '-name']" type="text"
              [value]="value" class="form-control" />
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Module">
            <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
              <span title="Double click to edit" (dblclick)="editing[rowIndex + '-name'] = true" *ngIf="!editing[rowIndex + '-lastName']">
                {{value}}
              </span>
              <input autofocus (blur)="updateValue($event, 'name', rowIndex)" *ngIf="editing[rowIndex+ '-name']" type="text"
                [value]="value" class="form-control" />
            </ng-template>
          </ngx-datatable-column>
        <ngx-datatable-column name="Discount(%)">
            <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
              <span title="Double click to edit" (dblclick)="editing[rowIndex + '-name'] = true" *ngIf="!editing[rowIndex + '-name']">
                {{value}}
              </span>
              <input autofocus (blur)="updateValue($event, 'name', rowIndex)" *ngIf="editing[rowIndex+ '-name']" type="text"
                [value]="value" class="form-control" />
            </ng-template>
          </ngx-datatable-column>
        <ngx-datatable-column name="Expiry Date">
          <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
              <span title="Double click to edit" (dblclick)="editing[rowIndex + '-name'] = true" *ngIf="!editing[rowIndex + '-name']">
                  {{value}}
                </span>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Status">
            <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
              <span title="Double click to edit" (dblclick)="editing[rowIndex + '-name'] = true" *ngIf="!editing[rowIndex + '-name']">
                {{value}}
              </span>
              <input autofocus (blur)="updateValue($event, 'name', rowIndex)" *ngIf="editing[rowIndex+ '-name']" type="text"
                  [value]="value" class="form-control" />
            </ng-template>
          </ngx-datatable-column>

        <ngx-datatable-column name="Action" prop="id" [sortable]="false">
            <ng-template let-rowIndex="rowIndex" let-id="value" let-row = "row" ngx-datatable-cell-template>
              <button class="btn btn-sm btn-info" (click)="openEditFormModal(row)">
                <i class="fa fa-edit"></i> Edit
              </button>
              <button class="btn btn-sm btn-danger" (click)="openSuccessCancelSwal(row)">
                <i class="fa fa-trash"></i> Deactivate
              </button>
            </ng-template>
          </ngx-datatable-column>

      </ngx-datatable>
    </app-card>
  </div>
</div>

